(this["webpackJsonpstream-racing-wheel"]=this["webpackJsonpstream-racing-wheel"]||[]).push([[0],{10:function(e,t,a){e.exports=a(16)},15:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(9),i=a.n(r),o=a(2),s=a(4),c=a(5),d=a(3),u=a(7),m=a(6),g=(a(15),a(1));g.a.set("maxrotation",900);var h=function(e){var t=g.a.useWatch("imgWheel"),a=Object(o.a)(t,1)[0],n=g.a.useWatch("valueWheel"),r={transform:"rotate("+Object(o.a)(n,1)[0]*(g.a.get("maxrotation")/2)+"deg)"};return l.a.createElement("img",{width:"500px",height:"500px",alt:"",style:r,src:a})};var p=function(e){var t=g.a.useWatch(e.id),a=Object(o.a)(t,1)[0],n=e.downAmount*a*-1,r={width:"70px",position:"absolute",top:e.top+"px",left:e.left+"px",transform:"translateY("+n+"px)"};return l.a.createElement("img",{alt:"",style:r,src:e.src})};var v=function(e){var t=g.a.useWatch("imgGas"),a=Object(o.a)(t,1)[0],n=g.a.useWatch("imgBrake"),r=Object(o.a)(n,1)[0],i=g.a.useWatch("imgClutch"),s=Object(o.a)(i,1)[0],c=g.a.useWatch("imgPedalBase"),d=Object(o.a)(c,1)[0];return l.a.createElement("div",{style:{position:"relative"}},l.a.createElement(p,{id:"valueGas",top:-20,left:290,downAmount:50,src:a}),l.a.createElement(p,{id:"valueBrake",top:-10,left:160,downAmount:50,src:r}),l.a.createElement(p,{id:"valueClutch",top:-10,left:40,downAmount:50,src:s}),l.a.createElement("img",{alt:"",style:{width:"400px"},src:d}))};var b=function(e){var t=g.a.useWatch("imgShifter"),a=Object(o.a)(t,1)[0],n=e.gridSize/2,r=e.gridSize/2.2,i=0,s=0,c="100ms",d=-1,u=g.a.useWatch("valueGearReverse"),m=Object(o.a)(u,1)[0],h=g.a.useWatch("valueGear1"),p=Object(o.a)(h,1)[0],v=g.a.useWatch("valueGear2"),b=Object(o.a)(v,1)[0],f=g.a.useWatch("valueGear3"),E=Object(o.a)(f,1)[0],G=g.a.useWatch("valueGear4"),x=Object(o.a)(G,1)[0],w=g.a.useWatch("valueGear5"),y=Object(o.a)(w,1)[0],k=g.a.useWatch("valueGear6"),W=Object(o.a)(k,1)[0],B=g.a.useWatch("valueGear7"),C=Object(o.a)(B,1)[0],O=g.a.useWatch("valueGear8");switch(m&&(d=0),p&&(d=1),b&&(d=2),E&&(d=3),x&&(d=4),y&&(d=5),W&&(d=6),C&&(d=7),Object(o.a)(O,1)[0]&&(d=8),d){case-1:c="500ms",i=0,s=0;break;case 1:i=-n,s=-r;break;case 2:i=-n,s=r;break;case 3:i=0,s=-r;break;case 4:i=0,s=r;break;case 5:i=n,s=-r;break;case 6:i=n,s=r;break;case 7:i=n+n,s=r;break;default:c="500ms",i=0,s=0}var j={width:"150px",zIndex:"999",position:"absolute",top:e.top+"px",left:e.left+"px",transition:"all "+c,transform:"translate("+i+"px, "+s+"px)"},S={backgroundColor:"red",width:"10px",height:"20px",zIndex:"999",position:"absolute",top:"0px",left:"0px",display:"none"};return l.a.createElement("div",{style:{position:"relative"}},l.a.createElement("div",{style:S}),l.a.createElement("img",{alt:"",style:j,src:a}))};var f=function(e){var t=g.a.useWatch("imgShifterBase"),a=Object(o.a)(t,1)[0];return l.a.createElement("div",{style:{position:"relative"}},l.a.createElement(b,{top:70,left:50,gridSize:150}),l.a.createElement("img",{alt:"",width:"250px",src:a}))};function E(e){return l.a.createElement("div",{style:{display:"block",paddingLeft:"1rem",paddingBottom:"0.5rem"}},l.a.createElement("label",{style:{fontWeight:"light",color:"white",paddingRight:"0.5rem",width:"150px",height:"2rem",display:"inline-block"}},e.title),l.a.createElement("input",{name:e.id,type:"text",value:g.a.get(e.id),onChange:function(t){g.a.set(e.id,t.target.value)},style:{height:"2rem",width:"400px"}}))}function G(e){return l.a.createElement("div",{style:{display:"inline-block",paddingLeft:"1rem"}},l.a.createElement("label",{style:{fontWeight:"light",color:"white",paddingRight:"0.5rem",height:"2rem",display:"inline-block"}},e.title),l.a.createElement("select",{style:{height:"2rem",width:"50px"},name:e.id,defaultValue:g.a.get(e.id),onChange:function(t){g.a.set(e.id,Number.parseInt(t.target.value)),localStorage.setItem(e.id,t.target.value)}},e.options))}for(var x=function(e){var t=g.a.useWatch("gamePad"),a=Object(o.a)(t,1)[0],n=g.a.useWatch("axes"),r=Object(o.a)(n,1)[0],i=g.a.useWatch("buttons"),s=Object(o.a)(i,1)[0],c=[],d=[],u=[],m=[];if(!a||!r||!s)return l.a.createElement(l.a.Fragment,null);for(var h=0;h<r.length;h++){var p=Number.parseFloat(r[h]),v=(p+1)/2*100;v=Math.min(v,100),p=p.toFixed(3),u.push(l.a.createElement("span",{style:{padding:"0.5rem",width:"50px",height:"2rem",margin:"0.5rem",backgroundColor:"black",color:"white",position:"relative",display:"inline-block",textAlign:"center"},key:"displayAxes-"+h},l.a.createElement("span",{style:{width:v+"%",height:"0.4rem",position:"absolute",top:0,left:0,transition:"width 0.05s linear",backgroundColor:"white"}}),h)),c.push(l.a.createElement("option",{key:"optionAxes-"+h,value:h},h))}for(var b=0;b<a.buttons.length;b++){var f=s[b];m.push(l.a.createElement("span",{key:"displayButtons-"+b,style:{display:"inline-block",textAlign:"center",borderRadius:"50%",width:"2.5rem",height:"2.5rem",padding:"0.5rem",margin:"0.2rem",color:(null===f||void 0===f?void 0:f.pressed)?"black":"white",backgroundColor:(null===f||void 0===f?void 0:f.pressed)?"white":"#222"}},b)),d.push(l.a.createElement("option",{key:"optionButtons-"+b,value:b},b))}var x=function(e,t){g.a.set(e,t),localStorage.setItem(e,t)};return l.a.createElement("div",{style:{paddingBottom:"3rem"}},l.a.createElement("p",{style:{color:"white"}},"Press and move your controller inputs to identify the ID needed to map the input to the correct binding."),l.a.createElement("div",{id:"displayAxes",style:{width:"100%"}},l.a.createElement("h3",{style:{color:"white",padding:"1rem 0"}},"Axes IDs"),u),l.a.createElement("div",{id:"displayButtons",style:{width:"100%",paddingBottom:"1rem"}},l.a.createElement("h3",{style:{color:"white",padding:"1rem 0"}},"Button IDs"),m),l.a.createElement("div",{style:{paddingBottom:"1rem"}},l.a.createElement("h3",{style:{color:"white",padding:"1rem 0"}},"Input Binding"),l.a.createElement(G,{title:"Wheel",id:"axisWheel",options:c}),l.a.createElement(G,{title:"Gas",id:"axisGas",options:c}),l.a.createElement(G,{title:"Break",id:"axisBrake",options:c}),l.a.createElement(G,{title:"Clutch",id:"axisClutch",options:c}),l.a.createElement(G,{title:"Gear Reverse",id:"buttonGearReverse",options:d}),l.a.createElement(G,{title:"Gear 1",id:"buttonGear1",options:d}),l.a.createElement(G,{title:"Gear 2",id:"buttonGear2",options:d}),l.a.createElement(G,{title:"Gear 3",id:"buttonGear3",options:d}),l.a.createElement(G,{title:"Gear 4",id:"buttonGear4",options:d}),l.a.createElement(G,{title:"Gear 5",id:"buttonGear5",options:d}),l.a.createElement(G,{title:"Gear 6",id:"buttonGear6",options:d}),l.a.createElement(G,{title:"Gear 7",id:"buttonGear7",options:d})),l.a.createElement("div",null,l.a.createElement("h3",{style:{color:"white",padding:"1rem 0"}},"Change Images"),l.a.createElement("h5",{style:{fontWeight:"light",color:"white",padding:"0",paddingBottom:"1rem"}},"Enter an image URL to replace the existing image"),l.a.createElement(E,{title:"Wheel",id:"imgWheel"}),l.a.createElement(E,{title:"Pedal Base",id:"imgPedalBase"}),l.a.createElement(E,{title:"Gas Pedal",id:"imgGas"}),l.a.createElement(E,{title:"Brake Pedal",id:"imgBrake"}),l.a.createElement(E,{title:"Clutch Petal",id:"imgClutch"}),l.a.createElement(E,{title:"Shifter Base",id:"imgShifterBase"}),l.a.createElement(E,{title:"Shifter Head",id:"imgShifter"}),l.a.createElement("button",{className:"resetButton",onClick:function(){x("imgWheel","/stream-racing-wheel/g920/wheel.png"),x("imgPedalBase","/stream-racing-wheel/g920/pedals.png"),x("imgGas","/stream-racing-wheel/g920/gas.png"),x("imgBrake","/stream-racing-wheel/g920/brake.png"),x("imgClutch","/stream-racing-wheel/g920/clutch.png"),x("imgShifterBase","/stream-racing-wheel/g920/shifter-base.png"),x("imgShifter","/stream-racing-wheel/g920/shifter.png")}},"Reset to Default")))},w=[],y=[],k=0;k<20;k++)w.push({pressed:!1,touched:!1,value:0}),y.push(0);function W(e,t){var a=function(e){var t=localStorage.getItem(e);return null===t||"undefined"===typeof t||0!==e.indexOf("axis")&&0!==e.indexOf("button")||(t=Number.parseInt(t)),t}(e);null==a||"undefined"===typeof a?(g.a.set(e,t),localStorage.setItem(e,t)):g.a.set(e,a)}function B(e){var t=this,a=g.a.useWatch("gamePadIndex"),n=Object(o.a)(a,1)[0],r=function(e){!function(e){console.log(e);var a=navigator.getGamepads()[e];g.a.set("gamePadIndex",e),g.a.set("gamePad",a),t.gameLoop()}(e.target.value)},i=navigator.getGamepads(),s=Object.values(i).map((function(e){return e?l.a.createElement("option",{key:"optionsGamepad"+e.id,value:e.index},e.id):null}));return l.a.createElement("div",null,l.a.createElement("label",{style:{color:"white",display:"inline-block",paddingRight:"1rem",fontWeight:"bold"}},"Controller Gamepad"),l.a.createElement("select",{name:"gamepadSelection",defaultValue:n,onChange:function(t){r(t),e.onChange(t)}},s))}W("axisWheel",0),W("axisGas",1),W("axisBrake",2),W("axisClutch",5),W("buttonGearReverse",11),W("buttonGear1",12),W("buttonGear2",13),W("buttonGear3",14),W("buttonGear4",15),W("buttonGear5",16),W("buttonGear6",17),W("buttonGear7",11),W("imgWheel","/stream-racing-wheel/g920/wheel.png"),W("imgPedalBase","/stream-racing-wheel/g920/pedals.png"),W("imgGas","/stream-racing-wheel/g920/gas.png"),W("imgBrake","/stream-racing-wheel/g920/brake.png"),W("imgClutch","/stream-racing-wheel/g920/clutch.png"),W("imgShifterBase","/stream-racing-wheel/g920/shifter-base.png"),W("imgShifter","/stream-racing-wheel/g920/shifter.png"),g.a.set("valueWheel",0),g.a.set("valueBrake",0),g.a.set("valueGas",0),g.a.set("valueCluch",0),g.a.set("valueGearReverse",0),g.a.set("valueGear1",0),g.a.set("valueGear2",0),g.a.set("valueGear3",0),g.a.set("valueGear4",0),g.a.set("valueGear5",0),g.a.set("valueGear6",0),g.a.set("valueGear7",0),g.a.set("buttons",w),g.a.set("axes",y);var C=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).gamePads={},n.start=0,n.a=0,n.b=0,n.gamePadIndex=-1,n.state={gameLoopStarted:!1,rotation:900},n.gameLoop=n.gameLoop.bind(Object(d.a)(n)),n.onGamepadConnected=n.onGamepadConnected.bind(Object(d.a)(n)),window.addEventListener("gamepadconnected",n.onGamepadConnected),n}return Object(c.a)(a,[{key:"onGamepadConnected",value:function(e){var t=navigator.getGamepads()[e.gamepad.index];console.log("Gamepad connected at index %d: %s. %d buttons, %d axes.",t.index,t.id,t.buttons.length,t.axes.length),g.a.get("gamePad")||this.changeGamepad(t.index),this.gamePads[t.index]=t,this.setState({gamePads:this.gamePads}),t.id.toLowerCase().indexOf("wheel")>-1&&this.changeGamepad(t.index)}},{key:"onChange",value:function(e){this.changeGamepad(e.target.value)}},{key:"changeGamepad",value:function(e){console.log(e);var t=navigator.getGamepads()[e];this.gamePadIndex=e,g.a.set("gamePad",t),this.setState({gamepadIndex:e,gameLoopStarted:!0}),this.gameLoop()}},{key:"onWheelRotationChange",value:function(e){var t=e.target.value;g.a.set("maxrotation",t),this.setState({rotation:t})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{style:{width:"100%",height:"100%",position:"absolute",top:"0px",left:"0px",paddingTop:"1rem",paddingLeft:"2rem"}},l.a.createElement("h1",{style:{color:"white"}},"Stream Racing Wheel"),l.a.createElement("a",{style:{color:"white"},href:"https://github.com/joetex/stream-racing-wheel"},"View on GitHub"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(B,{onChange:function(t){e.onChange(t)}}),l.a.createElement("br",null),l.a.createElement("label",{style:{color:"white",display:"inline-block",paddingRight:"1rem",fontWeight:"bold"}},"Max Rotation"),l.a.createElement("input",{name:"wheelRotation",type:"number",value:this.state.rotation,onChange:function(t){e.onWheelRotationChange(t)}}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("span",{style:{color:"white"}},l.a.createElement("strong",null,"Scroll down")," to re-bind inputs and change images"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{style:{width:"600px"}},l.a.createElement("div",{style:{position:"relative",top:"20px"}},l.a.createElement(h,{rotation:this.state.rotation})),l.a.createElement("div",{style:{position:"relative",top:"-300px",left:"500px",marginLeft:"50px"}},l.a.createElement(f,null)),l.a.createElement("div",{style:{position:"relative",top:"-170px",left:"30px",marginLeft:"50px"}},l.a.createElement(v,null))),l.a.createElement("div",{style:{paddingTop:"5rem"}},l.a.createElement(x,null)))}},{key:"buttonPressed",value:function(e){return"object"==typeof e?e.pressed:1===e}},{key:"gameLoop",value:function(){var e,t,a,n,l,r,i,o;if(-1!==this.gamePadIndex){for(var s=navigator.getGamepads()[this.gamePadIndex],c=[],d=0;d<s.buttons.length;d++){var u=s.buttons[d],m={pressed:u.pressed,touched:u.touched,value:u.value};c.push(m)}for(var h=[],p=0;p<s.axes.length;p++){var v=s.axes[p];h.push(v)}var b=g.a.get("axisWheel"),f=g.a.get("axisGas"),E=g.a.get("axisBrake"),G=g.a.get("axisClutch"),x=g.a.get("buttonGearReverse"),w=g.a.get("buttonGear1"),y=g.a.get("buttonGear2"),k=g.a.get("buttonGear3"),W=g.a.get("buttonGear4"),B=g.a.get("buttonGear5"),C=g.a.get("buttonGear6"),O=g.a.get("buttonGear7");null!=b&&g.a.set("valueWheel",h[b]),null!=f&&g.a.set("valueGas",h[f]),null!=E&&g.a.set("valueBrake",h[E]),null!=G&&g.a.set("valueClutch",h[G]),null!=x&&g.a.set("valueGearReverse",null===(e=c[x])||void 0===e?void 0:e.pressed),null!=w&&g.a.set("valueGear1",null===(t=c[w])||void 0===t?void 0:t.pressed),null!=y&&g.a.set("valueGear2",null===(a=c[y])||void 0===a?void 0:a.pressed),null!=k&&g.a.set("valueGear3",null===(n=c[k])||void 0===n?void 0:n.pressed),null!=W&&g.a.set("valueGear4",null===(l=c[W])||void 0===l?void 0:l.pressed),null!=B&&g.a.set("valueGear5",null===(r=c[B])||void 0===r?void 0:r.pressed),null!=C&&g.a.set("valueGear6",null===(i=c[C])||void 0===i?void 0:i.pressed),null!=O&&g.a.set("valueGear7",null===(o=c[O])||void 0===o?void 0:o.pressed),g.a.set("buttons",c),g.a.set("axes",h),this.start=requestAnimationFrame(this.gameLoop)}}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[10,1,2]]]);
//# sourceMappingURL=main.b858f15c.chunk.js.map